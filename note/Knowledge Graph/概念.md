# 1 知识图谱概述

## 1.1 定义

知识图谱是一种用图模型来描述和建模世界之间的关联关系的技术方法。

## 1.2 用途

### 1.2.1 辅助搜索

语义搜索：直接对事物进行搜索

知识图谱：提供关于事物的分类、属性和关系的描述

### 1.2.2 辅助问答

基于知识图谱的问答技术：基于语义解析、基于图匹配、基于模板学习、基于表示学习和深度学习以及混合模型等，用于辅助实现语义解析等

### 1.2.3 辅助大数据分析

- 基于本体融合和集成多种来源的数据，通过知识图谱和语义技术增强数据之间的关联，使得用户可以用更加直观的图谱方式对数据进行关联挖掘与分析

- 广泛用来作为先验知识从文本中提取实体和关系，远程监督中的应用。

- 辅助实现文本中的实体消歧，指代消解和文本理解
- 描述性数据分析：指依赖数据本身的语义描述实现数据分析的方法。

### 1.2.4 辅助语言理解

实现深度语义理解

The trophy would note fit in the brown suitcase because it was too big(small).What was too big(small)?

Answer 0: the trophy Answer 1: the suitcase

### 1.2.5 辅助设备互联

<img src="https://picgo-1259245122.cos.ap-shanghai.myqcloud.com/img/note/springcloud/202302141301885.jpg" alt="img" style="zoom: 33%;" />

一个设备产生的原始数据在封装了语义描述之后，可以更加容易地与其他设备的数据进行融合、交换和互操作，并可以进一步链接进入知识图谱中，以便支持搜索、推理和分析等任务。

## 1.3 国内外典型的知识图谱项目

Cyc、WordNet、ConceptNet、Freebase、DBpedia、Schema.org、Wikidata、BabelNet、NELL、Yago、LOD

OopenKG 中文知识图谱数据

### 1.3.1 垂直领域知识图谱

面对特定领域的知识图谱，如电商、金融、医疗等。

|     比较内容     |                         通用知识图谱                         |                         领域知识图谱                         |
| :--------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
|  知识来源及规模  | 以互联网开放数据，如Wikipedia或社区众包为主要来源，桌布扩大规模 |    以领域或企业内部的数据为主要来源，通常要求快速扩大规模    |
| 对知识表示的要求 |                  主要以三元组事实型知识为主                  |   知识结构更加复杂，通常包含较为复杂的本体工程和规则型知识   |
| 对知识质量的要求 |  较多地采用面向开放域的Web抽取，对知识抽取质量有一定容忍度   | 知识抽取的质量要求高，较多地依靠从企业内部的结构化、非结构化数据进行联合抽取，并依靠人工进行审核校验，保障质量 |
| 对知识融合的要求 |                  融合主要起到提升质量的作用                  |          融合多源的领域数据时扩大构建规模的有效手段          |
|  知识的应用形式  |        主要以搜索和问答为主要应用形式，对推理要求较低        | 应用形式更加全面，除搜索问答外，通常还包括决策分析、业务管理等，并对推理的要求更高，并有较强的可解释性要求 |
|       举例       |                  DBpedia，Yago，百度，谷歌                   |                 电商，医疗，金融，农业，安全                 |

![image-20230221090406869](https://picgo-1259245122.cos.ap-shanghai.myqcloud.com/img/note/springcloud/202302210904213.png)

知识图谱具有规模巨大、知识结构更加复杂、来源更加多样、知识更加异构、具有高度的动态性和时效性、更深层次的推理需求等特点。

知识图谱用于表达更加规范的高质量数据：

- 知识图谱采用更加规范而标准的概念模型、本体术语和语法来建模和描述数据
- 知识图谱通过语义链接增强数据之间的关联。这种表达规范、关联性强的数据在改进搜索、问答体验、辅助决策分析和支持推理等多个方面都能发挥重要作用。

## 1.4 知识图谱的技术流程

知识图谱方法设计知识表示、知识获取、知识处理和知识利用多个方面。一般流程为：首先确定知识表示模型，然后根据数据来源选择不同的知识获取手段导入知识，接着综合利用知识推理、知识融合、知识挖掘等技术对构建的知识图谱进行质量提升，最后根据场景需求设计不同的知识访问与呈现方法，如语义搜索、问答交互、图谱可视化分析等。

### 1.4.1 知识来源

可以从多种来源获取知识图谱数据，包括文本、结构化数据库、多媒体数据、传感器数据和人工众包等。每一种数据源的知识化都需要综合各种不同的技术手段。例如：**对于文本数据源，需要综合实体识别、实体链接、关系抽取、事件抽取等各种自然语言处理技术，实现从文本中抽取知识**。

结构化数据库如各种关系数据库。已有的结构化数据库通常不能直接作为知识图谱使用，而需要**将结构化数据定义到本体模型之间的语义映射**，再通过编写语义翻译工具实现结构化数据到知识图谱的转化。此外，还需要综合采用**实体消歧、数据融合、知识链接等技术，提升数据的规范化水平，增强数据之间的关联**。

**语义技术**也被用来对传感器产生的数据进行语义化。这包括对物联设备进行抽象，定义符合语义标准的数据接口；对传感数据进行语义封装和对传感数据增强上下文语义描述等。

### 1.4.2 知识表示与Schema工程

知识表示是指用计算机符号描述和表示人脑中的知识，以支持机器模拟人的心智进行推理的方法与技术。知识表示决定了图谱构建的产出目标，即知识图谱的语义描述框架（Description Framework）,Schema与本体(Ontology)，知识交换语法(Syntax)，实体命名及ID体系。

- **基本描述框架**定义知识图谱的基本数据模型和逻辑结构，如国际万维网联盟(World Wide Web Consortium,W3C)的RDF。
- Schema与本体定义知识图谱的类集、属性集、关系集合词汇集
- 交换语法定义知识实际存在的物理格式，如Turtle，JSON等
- 实体命名及ID体系定义实体的命名原则及唯一标识规范

按照知识类型的不同，知识图谱包括了词、实体、关系、事件、术语体系(Taxonomy)、规则等

W3C的RDF把三元组(triple)作为基本的数据模型，其基本的逻辑结构包含主语(subject),谓语(predicate),宾语(object)三个部分。

### 1.4.3 知识抽取

知识抽取按任务可以分为概念抽取、实体识别、关系抽取、事件抽取和规则抽取等。传统专家系统时代的知识主要依靠专家手工录入，难以扩大规模。现代知识图谱的构建通常大多依靠已有的结构化数据资源进行转化，形成基础数据集，再依靠自动化知识抽取和知识图谱补全技术，从多种数据来源进一步扩展知识图谱，并通过人工众包进行一步提升知识图谱的质量。

结构化和文本数据是目前最主要的知识来源。结构化数据库中获取知识一般使用现有的D2R工具。

从文本中获取知识主要包括实体识别和关系抽取。典型的关系抽取方法可以分为基于特征模板的方法，基于核函数的监督学习方法，基于远程监督的方法和基于深度学习的监督或远程监督方法。远程监督的思想是：利用一个大型的语义数据库自动获取关系类型标签。这些标签可能是含有噪声的，但是大量的训练数据在一定程度上可以抵消这些噪声。

### 1.4.4 知识融合

在构建知识图谱时，可以从第三方知识库产品或已有结构化数据中获取知识输入。比如关联开放数据项目（linked open data）会定期发布其经过积累和整理的语义数据。当多个知识图谱进行融合，或者将外部关系数据库合并到本体知识库时，需要处理两个层面的问题：

- 通过模式层的融合，将新得到的本体融入已有的本体库中，以及新旧本体的融合；

- 数据层的融合，包括实体的指称、属性、关系以及所属类别等，主要的问题是如何避免实例以及关系的冲突问题，造成不必要的冗余。

数据层的融合是指实体和关系（包括属性）元组的融合，主要是实体匹配或者对齐，由于知识库中有些实体含义但是具有不同的标识符，因此需要对这些实体进行合并处理。此外，还需要对**新增实体和关系进行验证和评估**，以确保知识图谱的内容一致性和准确性，通常采用而定方法时**在评估过程中为新加入的知识赋予可行度值**。据此进行知识的过滤和融合。

实体对齐的任务包括了实体消歧和共指消解，即判断知识库中的同名实体是否代表不同的含义以及知识库中是否存在其他命名实体表示相同的含义。实体消歧专门用于解决同名实体产生歧义的问题，通常采用聚类法，其关键问题是如何定义实体对象与指称项之间的相似度，常用方法有空间向量模型（词袋模型），语义模型，社会网络模型，百科知识模型和增量证据模型，一些最新的工作利用知识图谱嵌入方法进行实体对齐，并引入人机写作方式提升实体对齐的质量。

本体是针对特定领域中Schema定义、概念模型和公理定义而言的，目的是弥合词汇异构性和语义歧义的间隙，使沟通达成共识。这种共识往往通过一个反复的过程达到，每次迭代都是一次共识的修改。因此，本体对齐通常带来的是共识模式的演化和变化，本体对齐的主要问题之一也可以转化为怎样管理这种演化和变化。常见的本体演化管理框架由KAON、Conto-diff、Onto View

### 1.4.5 知识图谱补全与推理

常用的知识图谱补全方法包括：基于本体推理的补全方法，如基于描述逻辑的推理，以及相关的推理机实现，如RDFox、Pellet、PACER、HermiT、TrOWL等。主要针对概念层进行推理，也可以用来对实体级的关系进行补全。

另外一类的知识补全算法基于图结构和关系路径特征的方法，如基于随机游走获取路径特征的PRA算法，基于子图结构的SPE算法，基于层次化随机游走模型的PRA算法。这类算法的共同特点是通过两个实体节点之间的路径，以及节点周围图的结构提取特征，并通过随机游走等算法降低特征抽取的复杂度，然后叠加线性的学习模型进行关系的预测。

更为常见的补全实现是基于表示学习和知识图谱嵌入的链接预测，如基本的翻译模型、组合模型和神经元模型。这种简单的嵌入模型一般只能实现单步的推理。对于更复杂的模型，如向量空间中引入随机游走模型的方法，在同一个向量空间中将路径与实体和关系一起表示出来在进行补全的模型。

文本信息也被用来辅助实现知识图谱的补全。将文本中的实体和结构化图谱中的实体对齐，然后利用双方的语义信息辅助实现关系预测或抽取。这类模型一般包含三个部分：**三元组解码器、文本解码器和联合解码器**。三元组解码器将知识图谱中的实体和关系转化为低维向量；文本解码器则要从文本语料库中学习实体的向量表示；联合解码器的目的是保证实体、关系和词的嵌入向量位于相同的空间中，并且集成实体向量和词向量。

### 1.4.6 知识检索与知识分析

基于知识图谱的知识检索的实现形式主要包括语义检索和智能问答。传统搜索引擎依靠网页之间的超链接实现网页的搜索，而语义搜索直接对事物进行搜索，如人物、机构、地点等。这些事物可能来自文本、图片、视频、音频、IoT设备等各种信息资料。而知识图谱和语义技术提供了关于这些事物的分类、属性和关系的描述，使得搜索引擎可以直接对事物进行索引和搜索。

知识图谱和语义技术也被用来辅助做数据分析与决策。描述性数据分析是指依赖数据本身的语义描述实现数据分析的方法。不同于计算性数据分析主要以建立各种数据分析模型，如深度神经网络，描述性数据分析突出预先抽取数据的语义，建立数据之间的逻辑，并依靠逻辑推理的方法实现数据分析。

## 1.5 知识图谱的相关技术

### 1.5.1 数据库系统

由于传统关系数据库无法有效适应知识图谱的图数据模型，知识图谱领域形成了RDF数据的三元组库（Triple Store），数据库领域开发了管理属性图的图数据库。

RDF三元组库主要是由Semantic Web领域推动开发的数据库管理系统，其数据模型RDF图和查询语言SPARQL均遵守W3C标准。

图数据库是数据库领域为了更好地存储和管理图模型数据而开发的数据库管理系统，其数据模型采用属性图，其上的声明式查询语言有：Cypher、PGQL、G-Core等。Cypher是开源图数据库Neo4j中实现的图查询语言。基于三元组库和图数据库能够提供的知识图谱数据存储方案可分为三类：

1. 基于关系的存储方案。包括三元组表、水平表、属性表、垂直划分、六重索引和DB2RDF等

三元组表是将知识图谱中的每条三元组存储为一行具有三列的记录(主语，谓语，宾语)，其问题是将知识图谱查询翻译为SQL后产生大量三元组表的自连接操作。

水平表存储方案的每行记录存储知识图谱中一个主语的所有谓语和宾语，相当于知识图谱的邻接表。但是其缺点在于所需列数目过多，表中产生大量空值，无法存储多值宾语等。

属性表存储方案将同一类主语分配到一个表中，是对水平表存储方案的细化。属性表解决了三元组表的自连接问题和水平表的列数过多问题。但是存在以下问题：**所需属性表过多，复杂查询的多表连接效率，空值问题和多值宾语问题**。

垂直划分存储方案为知识图谱中的每种谓语建立一张两列的表(主语，宾语)，表中存放由该谓语连接的主语和宾语，支持“主语-主语”作为连接条件的查询操作的快速执行。垂直划分有效解决了空值问题和多值宾语问题；但其仍有缺点，包括：大规模知识图谱的谓语表数目过多、复杂查询表连接过多、更新维护代价大等

六重索引存储方案是将三元组全部6种排列对应建立为6张表。六重索引通过“空间交换时间”策略有效缓解了三元组表的自连接问题，但需要更多的存储空间开销和索引更新维护代价。

DB2RDF存储方案是一种较新的基于关系的知识图谱存储方案，是以往存储方案的一种权衡优化。三元组表的灵活性体现在“行维度”上，无论多少行三元组数据，表模式只有3列固定不变。列名称不在和谓语绑定，将同一主语的所有谓语和宾语动态分配到某列。

2. 面向RDF的三元组库。主要的RDF三元组库包括：商业软件Virtuoso,AllegroGraph,GraphDB和BlazeGraph,开源系统Jena,RDF-3X和gStore
3. 原生图数据库。Neo4j是用java实现的开源图数据库。

### 1.5.2 智能问答

智能问答是一种人机交互的自然方式。知识问答依托一个大型知识库(知识图谱、结构化数据库等)，将用户的自然语言问题转化成结构化查询语句，直接从知识库中导出用户所需的答案。

攻克知识问答的

